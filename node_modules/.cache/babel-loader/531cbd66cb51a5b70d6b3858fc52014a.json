{"ast":null,"code":"import _regeneratorRuntime from\"/Users/liwentian/Desktop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/liwentian/Desktop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/liwentian/Desktop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _readOnlyError from\"/Users/liwentian/Desktop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/readOnlyError\";import React,{useEffect,useState}from'react';import ShowTimeList from'../components/ShowTimeList';import{useParams}from'react-router-dom';import Calendar from'../components/calendar';import{useHttpClient}from'../../shared/hooks/http-hook';import LoadingSpinner from'../../shared/components/UIElements/LoadingSpinner';import axios from'axios';var ShowTime=function ShowTime(props){var timeid=useParams().timeid;var _useState=useState(),_useState2=_slicedToArray(_useState,2),LoadedShowtimes=_useState2[0],setLoadedShowtimes=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setisLoading=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];useEffect(function(){var fetchShowtimes=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,responseData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setisLoading(true);_context.prev=1;_context.next=4;return fetch(process.env.REACT_APP_BACKEND_URL+\"/showtimes/\".concat(timeid));case 4:response=_context.sent;_context.next=7;return response.json();case 7:responseData=_context.sent;if(response.ok){_context.next=10;break;}throw new Error(responseData.message);case 10:setLoadedShowtimes(responseData.showtimes);_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](1);setError(_context.t0.message);case 16:setisLoading(false);case 17:case\"end\":return _context.stop();}}},_callee,null,[[1,13]]);}));return function fetchShowtimes(){return _ref.apply(this,arguments);};}();fetchShowtimes();},[timeid]);var errorHandler=function errorHandler(){setError=(_readOnlyError(\"setError\"),null);};return React.createElement(React.Fragment,null,React.createElement(Calendar,null),isLoading&&React.createElement(\"div\",null,React.createElement(LoadingSpinner,null)),!isLoading&&LoadedShowtimes&&React.createElement(ShowTimeList,{items:LoadedShowtimes}));};export default ShowTime;","map":{"version":3,"sources":["/Users/liwentian/Desktop/frontend/src/showtimes/pages/ShowTime.js"],"names":["React","useEffect","useState","ShowTimeList","useParams","Calendar","useHttpClient","LoadingSpinner","axios","ShowTime","props","timeid","LoadedShowtimes","setLoadedShowtimes","isLoading","setisLoading","error","setError","fetchShowtimes","fetch","process","env","REACT_APP_BACKEND_URL","response","json","responseData","ok","Error","message","showtimes","errorHandler"],"mappings":"6lBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA0BC,QAA1B,KAA0C,OAA1C,CACA,MAAOC,CAAAA,YAAP,KAAyB,4BAAzB,CACA,OAASC,SAAT,KAA0B,kBAA1B,CACA,MAAOC,CAAAA,QAAP,KAAqB,wBAArB,CACA,OAASC,aAAT,KAA8B,8BAA9B,CACA,MAAOC,CAAAA,cAAP,KAA2B,mDAA3B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEI,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAAAC,KAAK,CAAI,CACxB,GAAMC,CAAAA,MAAM,CAAGP,SAAS,GAAGO,MAA3B,CADwB,cAEsBT,QAAQ,EAF9B,wCAEjBU,eAFiB,eAEAC,kBAFA,8BAGSX,QAAQ,CAAC,KAAD,CAHjB,yCAGjBY,SAHiB,eAGPC,YAHO,8BAIEb,QAAQ,EAJV,yCAIjBc,KAJiB,eAIVC,QAJU,eAKxBhB,SAAS,CAAC,UAAM,CAEb,GAAMiB,CAAAA,cAAc,0FAAG,6JACtBH,YAAY,CAAC,IAAD,CAAZ,CADsB,sCAGEI,CAAAA,KAAK,CAACC,OAAO,CAACC,GAAR,CAAYC,qBAAZ,sBAAgDX,MAAhD,CAAD,CAHP,QAGdY,QAHc,qCAIOA,CAAAA,QAAQ,CAACC,IAAT,EAJP,QAIdC,YAJc,kBAKhBF,QAAQ,CAACG,EALO,+BAMZ,IAAIC,CAAAA,KAAJ,CAAUF,YAAY,CAACG,OAAvB,CANY,SAQpBf,kBAAkB,CAACY,YAAY,CAACI,SAAd,CAAlB,CARoB,iFAWpBZ,QAAQ,CAAC,YAAIW,OAAL,CAAR,CAXoB,QAatBb,YAAY,CAAC,KAAD,CAAZ,CAbsB,qEAAH,kBAAdG,CAAAA,cAAc,0CAApB,CAgBDA,cAAc,GACf,CAnBQ,CAmBP,CAACP,MAAD,CAnBO,CAAT,CAoBA,GAAMmB,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAK,CACxBb,QAAQ,6BAAE,IAAF,CAAR,CACD,CAFD,CAIA,MACA,qBAAC,KAAD,CAAO,QAAP,MACE,oBAAC,QAAD,MADF,CAEGH,SAAS,EAAK,+BACb,oBAAC,cAAD,MADa,CAFjB,CAKC,CAACA,SAAD,EAAcF,eAAd,EAAgC,oBAAC,YAAD,EAAc,KAAK,CAAEA,eAArB,EALjC,CADA,CAQL,CArCG,CAyCJ,cAAeH,CAAAA,QAAf","sourcesContent":["import React, { useEffect,useState } from 'react';\nimport ShowTimeList from '../components/ShowTimeList';\nimport { useParams } from 'react-router-dom';\nimport Calendar from '../components/calendar';\nimport { useHttpClient } from '../../shared/hooks/http-hook';\nimport LoadingSpinner from '../../shared/components/UIElements/LoadingSpinner';\nimport axios from 'axios';\n    \n    const ShowTime = props => {\n      const timeid = useParams().timeid;\n      const [LoadedShowtimes, setLoadedShowtimes] = useState();\n      const [isLoading,setisLoading] = useState(false);\n      const [error, setError] = useState();\n      useEffect(() => {\n        \n         const fetchShowtimes = async () => {\n          setisLoading(true);\n          try{          \n            const response= await fetch(process.env.REACT_APP_BACKEND_URL+`/showtimes/${timeid}`); \n            const responseData = await response.json();\n            if(!response.ok){\n              throw new Error(responseData.message);\n            }\n            setLoadedShowtimes(responseData.showtimes);\n            \n          } catch (err) {\n            setError(err.message);\n          }\n          setisLoading(false);\n        };\n\n        fetchShowtimes();\n      },[timeid]);\n      const errorHandler = () =>{\n        setError=(null);\n      }\n     \n      return (        \n      <React.Fragment>\n        <Calendar />\n        {isLoading && (<div>\n          <LoadingSpinner />\n        </div>)}  \n      {!isLoading && LoadedShowtimes &&<ShowTimeList items={LoadedShowtimes}/>}\n      </React.Fragment>);\n};\n\n\n\nexport default ShowTime;"]},"metadata":{},"sourceType":"module"}