{"ast":null,"code":"import _classCallCheck from\"/Users/liwentian/Desktop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/liwentian/Desktop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/liwentian/Desktop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/liwentian/Desktop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/liwentian/Desktop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{useEffect}from'react';import{addWeeks,subWeeks,addMonths,subMonths,startOfWeek,addDays,format,isSameMonth,isSameDay,endOfWeek,startOfMonth,endOfMonth,parse}from'date-fns';import'./calendar.css';import{useState}from'react';import ShowTime from'../pages/ShowTime';import{relativeTimeThreshold}from'moment';import{Link}from'react-router-dom';var Calendar=/*#__PURE__*/function(_React$Component){_inherits(Calendar,_React$Component);function Calendar(){var _getPrototypeOf2;var _this;_classCallCheck(this,Calendar);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Calendar)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.newDate=new Date();_this.state={currentWeek:_this.newDate,currentMonth:_this.newDate,selectedDate:_this.newDate,currentYear:_this.newDate.getFullYear(),check:false};_this.nextMonth=function(){_this.setState({currentWeek:addWeeks(_this.state.currentWeek,1),currentMonth:addWeeks(endOfWeek(_this.state.currentWeek),1)});};_this.prevMonth=function(){_this.setState({currentWeek:subWeeks(_this.state.currentWeek,1),currentMonth:subWeeks(endOfWeek(_this.state.currentWeek),1)});};return _this;}_createClass(Calendar,[{key:\"renderHeader\",value:function renderHeader(){var month=[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"];return React.createElement(\"div\",{className:\"header row flex-middle\"},React.createElement(\"div\",{className:\"col col-start\"},React.createElement(\"div\",{className:\"icon\",onClick:this.prevMonth},\"chevron_left\")),React.createElement(\"div\",{className:\"col col-center\"},React.createElement(\"span\",null,month[this.state.currentMonth.getMonth()],\"  \",this.state.currentYear)),React.createElement(\"div\",{className:\"col col-end\",onClick:this.nextMonth},React.createElement(\"div\",{className:\"icon\"},\"chevron_right\")));}},{key:\"renderDays\",value:function renderDays(){var DAYS=[\"SUN\",\"MON\",\"TUE\",\"WED\",\"THU\",\"FRI\",\"SAT\"];var days=[];for(var i=0;i<7;i++){days.push(React.createElement(\"div\",{className:\"col col-center\",key:i},DAYS[i]));}return React.createElement(\"div\",{className:\"days row\"},days);}},{key:\"renderCells\",value:function renderCells(){var _this2=this;var currentWeek=this.state.currentWeek;var startDate=startOfWeek(currentWeek);var endDate=endOfWeek(currentWeek);var dateFormat=\"d\";var rows=[];var days=[];var day=startDate;var formattedDate=\"\";while(day<=endDate){var _loop=function _loop(i){formattedDate=format(day,dateFormat);var sameday=isSameDay(day,_this2.state.selectedDate)?\"selected\":\"\";var showtime=addDays(startDate,i);var m=showtime.getMonth()+1;var month=showtime.getMonth()+1>=10?\"\":\"0\";var showtimesId=showtime.getFullYear()+\"-\"+month+m+\"-\"+showtime.getDate();days.push(React.createElement(\"div\",{className:\"col cell \".concat(sameday),key:day,id:day,onClick:function onClick(){return _this2.setState({selectedDate:addDays(startDate,i)});}},React.createElement(Link,{className:\"link\",to:\"/showtime/\".concat(showtimesId)},React.createElement(\"span\",{className:\"number\"},formattedDate),React.createElement(\"span\",{className:\"bg\"},formattedDate))));day=addDays(day,1);};for(var i=0;i<7;i++){_loop(i);}rows.push(React.createElement(\"div\",{className:\"row\",key:day},days));days=[];}return React.createElement(\"div\",{className:\"body\"},rows);}},{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"calendar\"},this.renderHeader(),this.renderDays(),this.renderCells());}}]);return Calendar;}(React.Component);export default Calendar;","map":{"version":3,"sources":["/Users/liwentian/Desktop/frontend/src/showtimes/components/calendar.js"],"names":["React","useEffect","addWeeks","subWeeks","addMonths","subMonths","startOfWeek","addDays","format","isSameMonth","isSameDay","endOfWeek","startOfMonth","endOfMonth","parse","useState","ShowTime","relativeTimeThreshold","Link","Calendar","newDate","Date","state","currentWeek","currentMonth","selectedDate","currentYear","getFullYear","check","nextMonth","setState","prevMonth","month","getMonth","DAYS","days","i","push","startDate","endDate","dateFormat","rows","day","formattedDate","sameday","showtime","m","showtimesId","getDate","renderHeader","renderDays","renderCells","Component"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport {addWeeks,subWeeks,addMonths,subMonths,startOfWeek,addDays,format,isSameMonth,isSameDay,endOfWeek,startOfMonth,endOfMonth,parse} from 'date-fns';\nimport './calendar.css';\nimport {useState}  from 'react';\nimport ShowTime from '../pages/ShowTime';\nimport { relativeTimeThreshold } from 'moment';\nimport { Link } from 'react-router-dom';\n\nclass Calendar extends React.Component {\n newDate = new Date();\n\n  state = {\n    currentWeek: this.newDate,\n    currentMonth: this.newDate,\n    selectedDate: this.newDate,\n    currentYear:this.newDate.getFullYear(),\n    check:false\n  };\n\n  renderHeader() {\n    const month=[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"];\n    \n    return (\n      <div className=\"header row flex-middle\">\n        <div className=\"col col-start\">\n          <div className=\"icon\" onClick={this.prevMonth}>\n            chevron_left\n          </div>\n        </div>\n        <div className=\"col col-center\">\n    <span>{month[this.state.currentMonth.getMonth()]}  {this.state.currentYear}</span>\n        </div>\n        <div className=\"col col-end\" onClick={this.nextMonth}>\n          <div className=\"icon\">chevron_right</div>\n        </div>\n      </div>\n    );\n  }\n\n  renderDays() {\n    \n    const DAYS = [\"SUN\",\"MON\",\"TUE\",\"WED\",\"THU\",\"FRI\",\"SAT\"];\n\n    let days=[];\n    for (let i = 0; i < 7; i++) {\n      days.push(\n        <div className=\"col col-center\" key={i}>\n          {DAYS[i]}\n        </div>\n      );\n    }\n\n    return <div className=\"days row\">{days}</div>;\n  }\n\n  renderCells() {\n    const { currentWeek} = this.state;\n  \n    const startDate = startOfWeek(currentWeek);\n    const endDate = endOfWeek(currentWeek);\n\n    const dateFormat = \"d\";\n    const rows = [];\n\n    let days = [];\n    let day = startDate;\n    let formattedDate = \"\";\n    \n    while (day <= endDate) {\n       \n      for (let i = 0; i < 7; i++) {\n        formattedDate = format(day, dateFormat);\n        let sameday = isSameDay(day, this.state.selectedDate)? \"selected\" : \"\";\n        let showtime = addDays(startDate,i);       \n         let m = showtime.getMonth()+1;\n         let month = showtime.getMonth()+1>=10? \"\":\"0\";\n         let showtimesId = showtime.getFullYear() + \"-\" + month + m +\"-\"+ showtime.getDate(); \n        days.push(\n          \n          <div         \n            className={`col cell ${sameday}` } \n            key={day} id={day} onClick={() => this.setState({selectedDate:addDays(startDate, i)})}\n            >\n            <Link className =\"link\" to={`/showtime/${showtimesId}`}>\n            <span className=\"number\">{formattedDate}</span>\n            <span className=\"bg\">{formattedDate}</span>\n            </Link>\n          </div>\n         \n        );\n        day = addDays(day, 1);\n      }\n      rows.push(\n        <div className=\"row\" key={day} >\n          {days}\n        </div>\n      );\n      days = [];\n    }\n    return <div className=\"body\">{rows}</div>;\n  }\n\n  nextMonth = () => {\n     this.setState({\n     currentWeek: addWeeks(this.state.currentWeek,1),\n     currentMonth:addWeeks(endOfWeek(this.state.currentWeek),1)\n    });\n    \n  };\n\n  prevMonth = () => {\n    this.setState({\n      currentWeek: subWeeks(this.state.currentWeek,1),\n      currentMonth:subWeeks(endOfWeek(this.state.currentWeek),1)\n    });\n   \n  };\n\n  render() {\n    return (\n      <div className=\"calendar\">\n        {this.renderHeader()}\n        {this.renderDays()}\n        {this.renderCells()}\n      </div>\n    );\n  }\n}\n\nexport default Calendar;"]},"metadata":{},"sourceType":"module"}